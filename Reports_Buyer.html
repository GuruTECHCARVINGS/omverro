<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Buyer Reports - TechCarvings</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
      :root {
        --accent: #1d4ed8;
        --accent-2: #7c3aed;
        --muted: #64748b;
        --card: #ffffff;
      }
      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(120deg, #f3f6fd 0%, #e9eafc 100%);
        color: #212121;
      }
      .box-white {
        background: rgba(255,255,255,0.95);
        border: 1px solid #E5E7EB;
        border-radius: 1.25rem;
        box-shadow: 0 12px 32px 0 rgba(59,130,246,0.08), 0 1.5px 6px 0 #d1e0ef;
        backdrop-filter: blur(8px) saturate(180%);
        transition: box-shadow .2s, border-color .2s;
      }
      .report-card {
        background: rgba(255,255,255,0.92);
        border: 1px solid #E5E7EB;
        border-radius: 1rem;
        box-shadow: 0 8px 28px rgba(59,130,246,0.08);
        transition: transform .18s cubic-bezier(.4,2,.3,1), box-shadow .2s, border-color .2s;
        cursor: pointer;
      }
      .report-card:hover {
        transform: scale(1.02) translateY(-2px);
        border-color: #7c3aed88;
        box-shadow: 0 18px 48px rgba(124,58,237,0.13);
      }
      .header-blur {
        backdrop-filter: saturate(180%) blur(12px);
        background-color: rgba(255,255,255,0.92);
        box-shadow: 0 2px 12px rgba(124,58,237,0.07);
      }
      .reveal {
        opacity: 0; transform: translateY(16px) scale(.98); transition: all .6s cubic-bezier(.4,2,.3,1);
      }
      .reveal.show {
        opacity: 1; transform: translateY(0) scale(1);
      }
      .badge {
        font-size: .7rem; font-weight: 700; padding: .25rem .5rem; border-radius: 999px;
        background: #EEF2FF; color: #7c3aed; border: 1px solid #7c3aed33;
        box-shadow: 0 2px 8px rgba(124,58,237,0.08);
      }
      .metric-card {
        background: rgba(255,255,255,0.92);
        border-radius: 1rem;
        box-shadow: 0 8px 28px rgba(59,130,246,0.08);
        border: 1px solid #E5E7EB;
        transition: transform .18s cubic-bezier(.4,2,.3,1), box-shadow .2s;
      }
      .metric-card:hover {
        transform: scale(1.03) translateY(-2px);
        box-shadow: 0 18px 48px rgba(124,58,237,0.13);
        border-color: #7c3aed88;
      }
      .tab-active {
        background: linear-gradient(135deg, #7c3aed 0%, #1d4ed8 100%);
        color: white;
      }
      .tab-inactive {
        background: rgba(255,255,255,0.8);
        color: #64748b;
      }
      .tab-inactive:hover {
        background: rgba(124,58,237,0.1);
        color: #7c3aed;
      }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Header -->
  <header id="app-header" class="bg-white border-b border-gray-200 sticky top-0 z-50 transition-colors">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <h1 class="text-xl font-bold text-[#212121] leading-tight">Reports</h1>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Page Header -->
    <div class="box-white ring-gradient p-6 mb-8 reveal">
      <div class="flex flex-col md:flex-row items-center justify-between gap-4">
        <div>
          <h1 class="text-3xl font-bold text-blue-700 mb-2 flex items-center gap-3">
            <i class="fas fa-chart-bar text-purple-600"></i>
            Reports
          </h1>
        </div>
        <div class="flex items-center gap-3">
          <select id="timeRange" class="px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-600 focus:border-blue-600">
            <option value="7d">Last 7 Days</option>
            <option value="30d" selected>Last 30 Days</option>
            <option value="90d">Last 3 Months</option>
            <option value="1y">Last Year</option>
          </select>
          <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-600">
            <i class="fas fa-sync-alt mr-2"></i>Refresh
          </button>
        </div>
      </div>
    </div>

    <!-- Key Metrics -->
    <section class="grid grid-cols-2 md:grid-cols-5 gap-6 mb-8">
      <div class="metric-card p-6 reveal">
        <div class="flex items-center justify-between mb-4">
          <div class="text-sm text-gray-500">Total Spend (YTD)</div>
          <i class="fas fa-rupee-sign text-blue-500 text-xl"></i>
        </div>
        <div class="text-2xl font-bold text-blue-700">₹43.2M</div>
        <div class="text-xs text-green-600 mt-1">↑ 12% vs last year</div>
      </div>
      <div class="metric-card p-6 reveal">
        <div class="flex items-center justify-between mb-4">
          <div class="text-sm text-gray-500">Cost Savings</div>
          <i class="fas fa-piggy-bank text-green-500 text-xl"></i>
        </div>
        <div class="text-2xl font-bold text-green-700">₹3.8M</div>
        <div class="text-xs text-green-600 mt-1">8.8% savings rate</div>
      </div>
      <div class="metric-card p-6 reveal">
        <div class="flex items-center justify-between mb-4">
          <div class="text-sm text-gray-500">Active Suppliers</div>
          <i class="fas fa-truck text-purple-500 text-xl"></i>
        </div>
        <div class="text-2xl font-bold text-purple-700">127</div>
        <div class="text-xs text-blue-600 mt-1">95% on-time delivery</div>
      </div>
      <div class="metric-card p-6 reveal">
        <div class="flex items-center justify-between mb-4">
          <div class="text-sm text-gray-500">PO Cycle Time</div>
          <i class="fas fa-clock text-orange-500 text-xl"></i>
        </div>
        <div class="text-2xl font-bold text-orange-700">3.2 days</div>
        <div class="text-xs text-green-600 mt-1">↓ 18% improvement</div>
      </div>
      <div class="metric-card p-6 reveal">
        <div class="flex items-center justify-between mb-4">
          <div class="text-sm text-gray-500">Compliance Score</div>
          <i class="fas fa-shield-alt text-indigo-500 text-xl"></i>
        </div>
        <div class="text-2xl font-bold text-indigo-700">96%</div>
        <div class="text-xs text-green-600 mt-1">Excellent rating</div>
      </div>
    </section>

    <!-- Report Categories -->
    <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      <!-- Spend Analysis Report -->
      <div class="report-card p-6 reveal" onclick="showReport('spend')">
        <div class="flex items-center gap-4 mb-4">
          <div class="w-12 h-12 rounded-lg bg-blue-100 flex items-center justify-center">
            <i class="fas fa-chart-line text-blue-600 text-xl"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-800">Spend Analysis</h3>
            <p class="text-sm text-gray-600">Category & Supplier Spending</p>
          </div>
        </div>
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span>Total YTD Spend</span>
            <span class="font-semibold">₹43.2M</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Top Category</span>
            <span class="font-semibold">IT Hardware</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Growth Rate</span>
            <span class="font-semibold text-green-600">+12%</span>
          </div>
        </div>
      </div>

      <!-- Supplier Performance Report -->
      <div class="report-card p-6 reveal" onclick="showReport('supplier')">
        <div class="flex items-center gap-4 mb-4">
          <div class="w-12 h-12 rounded-lg bg-green-100 flex items-center justify-center">
            <i class="fas fa-truck text-green-600 text-xl"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-800">Supplier Performance</h3>
            <p class="text-sm text-gray-600">Delivery & Quality Metrics</p>
          </div>
        </div>
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span>On-Time Delivery</span>
            <span class="font-semibold text-green-600">95%</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Quality Score</span>
            <span class="font-semibold">4.6/5</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Active Suppliers</span>
            <span class="font-semibold">127</span>
          </div>
        </div>
      </div>

      <!-- Purchase Order Analytics -->
      <div class="report-card p-6 reveal" onclick="showReport('po')">
        <div class="flex items-center gap-4 mb-4">
          <div class="w-12 h-12 rounded-lg bg-purple-100 flex items-center justify-center">
            <i class="fas fa-file-invoice text-purple-600 text-xl"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-800">PO Analytics</h3>
            <p class="text-sm text-gray-600">Purchase Order Insights</p>
          </div>
        </div>
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span>Total POs</span>
            <span class="font-semibold">1,247</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Average Cycle Time</span>
            <span class="font-semibold">3.2 days</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Success Rate</span>
            <span class="font-semibold text-green-600">97%</span>
          </div>
        </div>
      </div>

      <!-- Cost Savings Report -->
      <div class="report-card p-6 reveal" onclick="showReport('savings')">
        <div class="flex items-center gap-4 mb-4">
          <div class="w-12 h-12 rounded-lg bg-teal-100 flex items-center justify-center">
            <i class="fas fa-piggy-bank text-teal-600 text-xl"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-800">Cost Savings</h3>
            <p class="text-sm text-gray-600">Negotiation & Optimization</p>
          </div>
        </div>
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span>Total Savings</span>
            <span class="font-semibold">₹3.8M</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Savings Rate</span>
            <span class="font-semibold text-green-600">8.8%</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Best Method</span>
            <span class="font-semibold">Negotiation</span>
          </div>
        </div>
      </div>

      <!-- Budget vs Actual -->
      <div class="report-card p-6 reveal" onclick="showReport('budget')">
        <div class="flex items-center gap-4 mb-4">
          <div class="w-12 h-12 rounded-lg bg-orange-100 flex items-center justify-center">
            <i class="fas fa-wallet text-orange-600 text-xl"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-800">Budget Analysis</h3>
            <p class="text-sm text-gray-600">Budget vs Actual Spend</p>
          </div>
        </div>
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span>Budget Allocated</span>
            <span class="font-semibold">₹50M</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Actual Spend</span>
            <span class="font-semibold">₹43.2M</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Utilization</span>
            <span class="font-semibold text-green-600">86.4%</span>
          </div>
        </div>
      </div>

      <!-- Compliance & Risk -->
      <div class="report-card p-6 reveal" onclick="showReport('compliance')">
        <div class="flex items-center gap-4 mb-4">
          <div class="w-12 h-12 rounded-lg bg-red-100 flex items-center justify-center">
            <i class="fas fa-shield-alt text-red-600 text-xl"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-gray-800">Compliance & Risk</h3>
            <p class="text-sm text-gray-600">Regulatory & Policy Compliance</p>
          </div>
        </div>
        <div class="space-y-2">
          <div class="flex justify-between text-sm">
            <span>Compliance Score</span>
            <span class="font-semibold text-green-600">96%</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Risk Issues</span>
            <span class="font-semibold text-orange-600">3</span>
          </div>
          <div class="flex justify-between text-sm">
            <span>Audit Status</span>
            <span class="font-semibold text-green-600">Passed</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Detailed Report View -->
    <div id="reportDetail" class="hidden box-white ring-gradient p-6 reveal">
      <!-- Report Header -->
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 id="reportTitle" class="text-2xl font-bold text-blue-700">TAT Reports</h2>
          <p id="reportDescription" class="text-gray-600">Detailed analysis of processing times</p>
        </div>
        <div class="flex items-center gap-3">
          <button onclick="exportReport()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-600">
            <i class="fas fa-download mr-2"></i>Export
          </button>
          <button onclick="closeReport()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-600">
            <i class="fas fa-times mr-2"></i>Close
          </button>
        </div>
      </div>

      <!-- Report Tabs -->
      <div class="flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg">
        <button id="tab-trends" class="tab-active px-4 py-2 rounded-md text-sm font-medium transition-all">Trends</button>
        <button id="tab-breakdown" class="tab-inactive px-4 py-2 rounded-md text-sm font-medium transition-all">Breakdown</button>
        <button id="tab-comparison" class="tab-inactive px-4 py-2 rounded-md text-sm font-medium transition-all">Comparison</button>
        <button id="tab-insights" class="tab-inactive px-4 py-2 rounded-md text-sm font-medium transition-all">Insights</button>
      </div>

      <!-- Chart Type Selector -->
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-4">
          <span class="text-sm font-medium text-gray-700">Chart Type:</span>
          <div class="flex gap-2">
            <button id="chart-line" class="px-3 py-1 bg-blue-100 text-blue-700 rounded-md text-sm hover:bg-blue-200 transition-colors">
              <i class="fas fa-chart-line mr-1"></i>Line
            </button>
            <button id="chart-bar" class="px-3 py-1 bg-gray-100 text-gray-700 rounded-md text-sm hover:bg-gray-200 transition-colors">
              <i class="fas fa-chart-bar mr-1"></i>Bar
            </button>
            <button id="chart-pie" class="px-3 py-1 bg-gray-100 text-gray-700 rounded-md text-sm hover:bg-gray-200 transition-colors">
              <i class="fas fa-chart-pie mr-1"></i>Pie
            </button>
            <button id="chart-doughnut" class="px-3 py-1 bg-gray-100 text-gray-700 rounded-md text-sm hover:bg-gray-200 transition-colors">
              <i class="fas fa-chart-pie mr-1"></i>Doughnut
            </button>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button onclick="refreshCharts()" class="px-3 py-1 bg-green-100 text-green-700 rounded-md text-sm hover:bg-green-200 transition-colors">
            <i class="fas fa-sync-alt mr-1"></i>Refresh
          </button>
          <button onclick="printReport()" class="px-3 py-1 bg-purple-100 text-purple-700 rounded-md text-sm hover:bg-purple-200 transition-colors">
            <i class="fas fa-print mr-1"></i>Print
          </button>
        </div>
      </div>

      <!-- Charts Container -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold text-gray-800">Primary Chart</h3>
            <div class="flex gap-2">
              <button onclick="downloadChart('primary')" class="text-gray-500 hover:text-blue-600 text-sm">
                <i class="fas fa-download"></i>
              </button>
              <button onclick="fullscreenChart('primary')" class="text-gray-500 hover:text-blue-600 text-sm">
                <i class="fas fa-expand"></i>
              </button>
            </div>
          </div>
          <div class="relative" style="height: 350px; width: 100%; min-height: 350px;">
            <canvas id="primaryChart" width="400" height="350" style="max-width: 100%; height: auto;"></canvas>
          </div>
        </div>
        <div class="bg-white border border-gray-200 rounded-lg shadow-sm p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold text-gray-800">Secondary Chart</h3>
            <div class="flex gap-2">
              <button onclick="downloadChart('secondary')" class="text-gray-500 hover:text-blue-600 text-sm">
                <i class="fas fa-download"></i>
              </button>
              <button onclick="fullscreenChart('secondary')" class="text-gray-500 hover:text-blue-600 text-sm">
                <i class="fas fa-expand"></i>
              </button>
            </div>
          </div>
          <div class="relative" style="height: 350px; width: 100%;">
            <canvas id="secondaryChart" width="400" height="350"></canvas>
          </div>
        </div>
      </div>

      <!-- Data Table -->
      <div class="box-white p-4">
        <h3 class="text-lg font-semibold text-gray-800 mb-4">Detailed Data</h3>
        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead class="bg-gray-50" id="tableHeader">
              <tr>
                <th class="px-4 py-3 text-left font-semibold text-gray-800">Process</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-800">Average TAT</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-800">Min TAT</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-800">Max TAT</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-800">Target</th>
                <th class="px-4 py-3 text-left font-semibold text-gray-800">Status</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
              <tr>
                <td class="px-4 py-3">PR Creation to Approval</td>
                <td class="px-4 py-3">4.2 days</td>
                <td class="px-4 py-3">1 day</td>
                <td class="px-4 py-3">12 days</td>
                <td class="px-4 py-3">5 days</td>
                <td class="px-4 py-3"><span class="badge bg-green-100 text-green-800">On Target</span></td>
              </tr>
              <tr>
                <td class="px-4 py-3">PO Creation to Approval</td>
                <td class="px-4 py-3">2.8 days</td>
                <td class="px-4 py-3">0.5 days</td>
                <td class="px-4 py-3">8 days</td>
                <td class="px-4 py-3">3 days</td>
                <td class="px-4 py-3"><span class="badge bg-green-100 text-green-800">On Target</span></td>
              </tr>
              <tr>
                <td class="px-4 py-3">Invoice Submission to Payment</td>
                <td class="px-4 py-3">3.1 days</td>
                <td class="px-4 py-3">1 day</td>
                <td class="px-4 py-3">10 days</td>
                <td class="px-4 py-3">7 days</td>
                <td class="px-4 py-3"><span class="badge bg-green-100 text-green-800">Excellent</span></td>
              </tr>
              <tr>
                <td class="px-4 py-3">Vendor Onboarding</td>
                <td class="px-4 py-3">5.7 days</td>
                <td class="px-4 py-3">2 days</td>
                <td class="px-4 py-3">15 days</td>
                <td class="px-4 py-3">7 days</td>
                <td class="px-4 py-3"><span class="badge bg-yellow-100 text-yellow-800">Slight Delay</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Header blur on scroll
    const header = document.getElementById('app-header');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 6) header.classList.add('header-blur');
      else header.classList.remove('header-blur');
    });

    // Reveal on view
    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('show'); });
    }, { threshold: 0.08 });
    document.querySelectorAll('.reveal').forEach(el => io.observe(el));

    // Report functions
    let currentReportType = 'spend';
    let currentChartType = 'line';

    function showReport(type) {
      currentReportType = type;
      const reportDetail = document.getElementById('reportDetail');
      const reportTitle = document.getElementById('reportTitle');
      const reportDescription = document.getElementById('reportDescription');

      reportDetail.classList.remove('hidden');
      reportDetail.scrollIntoView({ behavior: 'smooth' });

      const reportConfig = {
        spend: {
          title: 'Spend Analysis Report',
          description: 'Comprehensive analysis of spending patterns across categories, suppliers, and time periods'
        },
        supplier: {
          title: 'Supplier Performance Report',
          description: 'Detailed evaluation of supplier delivery, quality, and compliance metrics'
        },
        po: {
          title: 'Purchase Order Analytics',
          description: 'In-depth analysis of PO processing times, success rates, and workflow efficiency'
        },
        savings: {
          title: 'Cost Savings Report',
          description: 'Analysis of cost reduction initiatives and savings opportunities'
        },
        budget: {
          title: 'Budget Analysis Report',
          description: 'Budget allocation, utilization, and variance analysis across departments'
        },
        compliance: {
          title: 'Compliance & Risk Report',
          description: 'Regulatory compliance status and risk assessment across procurement activities'
        }
      };

      const config = reportConfig[type] || reportConfig.spend;
      reportTitle.textContent = config.title;
      reportDescription.textContent = config.description;

      // Initialize charts immediately
      initializeCharts();
    }

    function closeReport() {
      document.getElementById('reportDetail').classList.add('hidden');
    }

    function exportReport() {
      const reportTitle = document.getElementById('reportTitle').textContent;
      showNotification(`Exporting ${reportTitle} to PDF...`, 'info');
      setTimeout(() => {
        showNotification('Report exported successfully!', 'success');
      }, 2000);
    }

    function refreshCharts() {
      showNotification('Refreshing charts with latest data...', 'info');
      initializeCharts(currentReportType);
      setTimeout(() => {
        showNotification('Charts refreshed successfully!', 'success');
      }, 1000);
    }

    function printReport() {
      showNotification('Preparing report for printing...', 'info');
      setTimeout(() => {
        window.print();
      }, 500);
    }

    function downloadChart(chartType) {
      showNotification(`Downloading ${chartType} chart...`, 'info');
      setTimeout(() => {
        showNotification('Chart downloaded successfully!', 'success');
      }, 1000);
    }

    function fullscreenChart(chartType) {
      showNotification(`Opening ${chartType} chart in fullscreen...`, 'info');
    }

    function showNotification(message, type) {
      const notification = document.createElement('div');
      notification.className = `fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300 ${
        type === 'success' ? 'bg-green-100 text-green-800 border border-green-200' :
        type === 'error' ? 'bg-red-100 text-red-800 border border-red-200' :
        'bg-blue-100 text-blue-800 border border-blue-200'
      }`;
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }

    // Sample data for all chart types
const sampleData = {
  primary: {
    line: {
      labels: ['Jan','Feb','Mar','Apr','May','Jun'],
      datasets: [{ label: 'Trend', data: [10,20,15,25,22,30], borderColor: '#3b82f6', backgroundColor: 'rgba(59,130,246,0.2)' }]
    },
    bar: {
      labels: ['Jan','Feb','Mar','Apr','May','Jun'],
      datasets: [{ label: 'Trend', data: [10,20,15,25,22,30], backgroundColor: '#3b82f6' }]
    },
    pie: {
      labels: ['A','B','C'],
      datasets: [{ data: [30,50,20], backgroundColor: ['#3b82f6','#10b981','#f59e0b'] }]
    },
    doughnut: {
      labels: ['A','B','C'],
      datasets: [{ data: [30,50,20], backgroundColor: ['#3b82f6','#10b981','#f59e0b'] }]
    }
  },
  secondary: {
    line: {
      labels: ['Jan','Feb','Mar','Apr','May','Jun'],
      datasets: [{ label: 'Metric', data: [5,15,10,20,18,25], borderColor: '#10b981', backgroundColor: 'rgba(16,185,129,0.2)' }]
    },
    bar: {
      labels: ['A','B','C','D'],
      datasets: [{ label: 'Metric', data: [5,15,10,20], backgroundColor: '#10b981' }]
    },
    pie: {
      labels: ['X','Y','Z'],
      datasets: [{ data: [40,30,30], backgroundColor: ['#10b981','#3b82f6','#f59e0b'] }]
    },
    doughnut: {
      labels: ['X','Y','Z'],
      datasets: [{ data: [40,30,30], backgroundColor: ['#10b981','#3b82f6','#f59e0b'] }]
    }
  }
};

    // Chart initialization - Simplified and robust
    function initializeCharts() {
      if (window.primaryChart) window.primaryChart.destroy();
      if (window.secondaryChart) window.secondaryChart.destroy();

      const pData = sampleData.primary[currentChartType];
      const pCtx = document.getElementById('primaryChart').getContext('2d');
      window.primaryChart = new Chart(pCtx, {
        type: currentChartType,
        data: { labels: pData.labels, datasets: pData.datasets },
        options: { responsive: true }
      });

      const sData = sampleData.secondary[currentChartType];
      const sCtx = document.getElementById('secondaryChart').getContext('2d');
      window.secondaryChart = new Chart(sCtx, {
        type: currentChartType,
        data: { labels: sData.labels, datasets: sData.datasets },
        options: { responsive: true }
      });
    }

    // Single initialization and chart-type button binding
    document.addEventListener('DOMContentLoaded', () => {
      initializeCharts();
      document.querySelectorAll('[id^="chart-"]').forEach(btn => {
        btn.addEventListener('click', () => {
          currentChartType = btn.id.replace('chart-','');
          // Update active class
          document.querySelectorAll('[id^="chart-"]').forEach(b => b.classList.remove('bg-blue-100','text-blue-700'));
          btn.classList.add('bg-blue-100','text-blue-700');

          // Update primary chart
          const pData = sampleData.primary[currentChartType];
          window.primaryChart.config.type = currentChartType;
          window.primaryChart.config.data.labels = pData.labels;
          window.primaryChart.config.data.datasets = pData.datasets;
          // Remove scales for pie/doughnut
          window.primaryChart.config.options.scales = (currentChartType==='bar') ? { y:{beginAtZero:true} } : {};
          window.primaryChart.update();

          // Update secondary chart
          const sData = sampleData.secondary[currentChartType];
          window.secondaryChart.config.type = currentChartType;
          window.secondaryChart.config.data.labels = sData.labels;
          window.secondaryChart.config.data.datasets = sData.datasets;
          window.secondaryChart.config.options.scales = {};
          window.secondaryChart.update();
        });
      });
    });
  </script>
</body>
</html>
