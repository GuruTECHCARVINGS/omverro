<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pending RFQs - Vendor Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Inter', sans-serif; background: #F9F9FA; color: #212121; }
    .box-white { background: #fff; border: 1px solid #E0E0E0; border-radius: 1rem; }
    .status-badge { padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
    .status-open { background: #fef3c7; color: #d97706; }
    .status-expiring { background: #fee2e2; color: #dc2626; }
    .status-new { background: #dbeafe; color: #2563eb; }
    .sidebar { background: #FAFAFA; color: #333; }
    .sidebar a:hover { background: #E1BEE7; color: #6A1B9A; }
    .sidebar-active { background: #8E24AA; color: #fff !important; }
    .sidebar-icon-bg { background: #E1BEE7; color: #6A1B9A; border-radius: 0.75rem; padding: 0.5rem; display: inline-flex; align-items: center; justify-content: center; }
  </style>
</head>
<body class="min-h-screen flex">
  <!-- Sidebar -->
  <aside class="sidebar w-62 flex flex-col border-r border-gray-300 select-none">
    <div class="flex items-center gap-2 px-4 py-4 border-b border-gray-300">
      <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD..." class="h-8 w-8 rounded-full" />
      <span class="font-semibold text-lg">Vendor Portal</span>
    </div>
    <nav class="flex flex-col gap-2 mt-6 px-4 flex-grow text-base font-medium">
      <a href="vendordashboard.html" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-tachometer-alt"></i> Dashboard
      </a>
      <a href="2_homepage.html" class="sidebar-active flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-clipboard-list"></i> RFQ Management
      </a>
      <a href="Vendor_Order.html" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-shopping-cart"></i> Orders
      </a>
      <a href="Vendor_ASN.html" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-truck-loading text-lg"></i> ASN & Shipping
      </a>
      <a href="Vendor_Product_inventory.html" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-box-open"></i> Products & Inventory
      </a>
      <a href="Vendor_payment.html" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-credit-card"></i> Payments
      </a>
      <a href="Vendor_portal_invoices.html" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-file-invoice-dollar"></i> Invoices
      </a>
      <a href="Vendor_analytics.html" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-chart-line"></i> Analytics & Reports
      </a>
      <a href="#" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-handshake"></i> Compliance
      </a>
      <a href="Vendor_Settings.html" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-cog"></i> Settings
      </a>
      <a href="Vendor_supporttickets.html" class="flex items-center gap-3 px-4 py-3 rounded-full transition">
        <i class="fas fa-headset"></i> Support Center
      </a>
    </nav>
  </aside>
  <!-- Main content -->
  <main class="flex-1 p-8 overflow-x-auto relative">
    <header class="flex justify-between items-center mb-10">
      <div>
        <h1 class="text-3xl font-bold text-[#212121] select-none">Pending RFQs</h1>
        <p class="text-[#666666] mt-1">Review and respond to your pending RFQs from SAP and portal data.</p>
      </div>
      <div>
        <a href="vendordashboard.html" class="text-purple-600 hover:text-purple-800 font-medium text-sm"><i class="fas fa-arrow-left mr-2"></i>Back to Dashboard</a>
      </div>
    </header>
    <section class="box-white p-8 shadow rounded-2xl mb-10">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-[#212121]">RFQ List</h2>
        <button class="px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition"><i class="fas fa-sync-alt mr-2"></i>Refresh</button>
      </div>
      <table class="w-full min-w-[900px] text-left border-collapse rounded-2xl overflow-hidden">
        <thead class="text-[#333333] bg-[#FAFAFA]">
          <tr>
            <th class="py-4 px-6 font-semibold rounded-tl-2xl border border-gray-200">RFQ No.</th>
            <th class="py-4 px-6 font-semibold border border-gray-200">Product</th>
            <th class="py-4 px-6 font-semibold border border-gray-200">Quantity</th>
            <th class="py-4 px-6 font-semibold border border-gray-200">Buyer</th>
            <th class="py-4 px-6 font-semibold border border-gray-200">Due Date</th>
            <th class="py-4 px-6 font-semibold border border-gray-200">Status</th>
            <th class="py-4 px-6 font-semibold rounded-tr-2xl border border-gray-200">Actions</th>
          </tr>
        </thead>
        <tbody class="text-[#212121]">
          <tr class="border-b border-gray-200 hover:bg-gray-50 transition-colors">
            <td class="py-4 px-6 font-medium">RFQ-2025-001</td>
            <td class="py-4 px-6">Industrial Bearings</td>
            <td class="py-4 px-6">500</td>
            <td class="py-4 px-6">ABC Industries</td>
            <td class="py-4 px-6 text-gray-600">01/08/2025</td>
            <td class="py-4 px-6"><span class="status-badge status-open">Open</span></td>
            <td class="py-4 px-6">
              <button class="px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition respond-btn" data-rfq="RFQ-2025-001"><i class="fas fa-edit mr-1"></i>Respond</button>
              <button class="px-3 py-1 bg-gray-200 text-gray-800 rounded-lg text-sm font-medium hover:bg-gray-300 ml-2 view-btn" data-rfq="RFQ-2025-001"><i class="fas fa-eye mr-1"></i>View</button>
            </td>
          </tr>
          <tr class="border-b border-gray-200 hover:bg-gray-50 transition-colors">
            <td class="py-4 px-6 font-medium">RFQ-2025-002</td>
            <td class="py-4 px-6">Steel Pipes</td>
            <td class="py-4 px-6">1200</td>
            <td class="py-4 px-6">XYZ Corp</td>
            <td class="py-4 px-6 text-gray-600">02/08/2025</td>
            <td class="py-4 px-6"><span class="status-badge status-expiring">Expiring Soon</span></td>
            <td class="py-4 px-6">
              <button class="px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition respond-btn" data-rfq="RFQ-2025-002"><i class="fas fa-edit mr-1"></i>Respond</button>
              <button class="px-3 py-1 bg-gray-200 text-gray-800 rounded-lg text-sm font-medium hover:bg-gray-300 ml-2 view-btn" data-rfq="RFQ-2025-002"><i class="fas fa-eye mr-1"></i>View</button>
            </td>
          </tr>
          <tr class="border-b border-gray-200 hover:bg-gray-50 transition-colors">
            <td class="py-4 px-6 font-medium">RFQ-2025-003</td>
            <td class="py-4 px-6">Electronic Components</td>
            <td class="py-4 px-6">800</td>
            <td class="py-4 px-6">LMN Ltd</td>
            <td class="py-4 px-6 text-gray-600">05/08/2025</td>
            <td class="py-4 px-6"><span class="status-badge status-new">New</span></td>
            <td class="py-4 px-6">
              <button class="px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition respond-btn" data-rfq="RFQ-2025-003"><i class="fas fa-edit mr-1"></i>Respond</button>
              <button class="px-3 py-1 bg-gray-200 text-gray-800 rounded-lg text-sm font-medium hover:bg-gray-300 ml-2 view-btn" data-rfq="RFQ-2025-003"><i class="fas fa-eye mr-1"></i>View</button>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
    <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- RFQ Details & Actions -->
      <div class="box-white p-6 shadow rounded-2xl">
        <h2 class="text-lg font-semibold text-[#212121] mb-4">RFQ Details & Quick Response</h2>
        <form class="space-y-4">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">RFQ No.</label>
              <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="RFQ-2025-001" readonly />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Product</label>
              <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="Industrial Bearings" readonly />
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Quantity</label>
              <input type="number" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="500" readonly />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Buyer</label>
              <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="ABC Industries" readonly />
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Your Quotation Amount</label>
            <input type="number" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="Enter amount" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Comments</label>
            <textarea class="w-full border border-gray-300 rounded-lg px-3 py-2" rows="2" placeholder="Add comments"></textarea>
          </div>
          <div class="flex gap-4 mt-2">
            <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition"><i class="fas fa-paper-plane mr-2"></i>Submit Quotation</button>
            <button type="reset" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-lg font-medium hover:bg-gray-300 transition"><i class="fas fa-times mr-2"></i>Cancel</button>
          </div>
        </form>
      </div>
      <!-- RFQ Insights -->
      <div class="box-white p-6 shadow rounded-2xl">
        <h2 class="text-lg font-semibold text-[#212121] mb-4">RFQ Insights</h2>
        <ul class="space-y-3">
          <li class="flex items-center gap-3">
            <i class="fas fa-clock text-yellow-600"></i>
            <span class="text-sm text-gray-800">3 RFQs expiring soon</span>
          </li>
          <li class="flex items-center gap-3">
            <i class="fas fa-check-circle text-green-600"></i>
            <span class="text-sm text-gray-800">5 new RFQs added today</span>
          </li>
          <li class="flex items-center gap-3">
            <i class="fas fa-user-check text-blue-600"></i>
            <span class="text-sm text-gray-800">2 buyers responded to your last quotation</span>
          </li>
          <li class="flex items-center gap-3">
            <i class="fas fa-chart-line text-purple-600"></i>
            <span class="text-sm text-gray-800">Average response time: 2 hours</span>
          </li>
        </ul>
      </div>
    </section>
    <!-- Modal for RFQ Details/Respond -->
    <div id="rfq-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-2xl shadow-lg w-full max-w-2xl p-8 relative">
        <button id="close-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl"><i class="fas fa-times"></i></button>
        <div id="modal-content"></div>
      </div>
    </div>
  </main>
  <script>
// Sample RFQ data with line items and sub-items
const rfqData = {
  'RFQ-2025-001': {
    rfqNo: 'RFQ-2025-001',
    product: 'Industrial Bearings',
    quantity: 500,
    buyer: 'ABC Industries',
    dueDate: '01/08/2025',
    status: 'Open',
    lineItems: [
      {
        item: 'Bearing Type A',
        subItems: [
          { name: 'Size 20mm', qty: 200 },
          { name: 'Size 30mm', qty: 300 }
        ]
      }
    ]
  },
  'RFQ-2025-002': {
    rfqNo: 'RFQ-2025-002',
    product: 'Steel Pipes',
    quantity: 1200,
    buyer: 'XYZ Corp',
    dueDate: '02/08/2025',
    status: 'Expiring Soon',
    lineItems: [
      {
        item: 'Pipe Type X',
        subItems: [
          { name: 'Length 6m', qty: 700 },
          { name: 'Length 12m', qty: 500 }
        ]
      }
    ]
  },
  'RFQ-2025-003': {
    rfqNo: 'RFQ-2025-003',
    product: 'Electronic Components',
    quantity: 800,
    buyer: 'LMN Ltd',
    dueDate: '05/08/2025',
    status: 'New',
    lineItems: [
      {
        item: 'Resistor',
        subItems: [
          { name: '100 Ohm', qty: 400 },
          { name: '220 Ohm', qty: 400 }
        ]
      }
    ]
  }
};

const rfqModal = document.getElementById('rfq-modal');
const modalContent = document.getElementById('modal-content');
const closeModalBtn = document.getElementById('close-modal');

function showModal(contentHtml) {
  modalContent.innerHTML = contentHtml;
  rfqModal.classList.remove('hidden');
}

function hideModal() {
  rfqModal.classList.add('hidden');
}

closeModalBtn.addEventListener('click', hideModal);

window.addEventListener('click', function(e) {
  if (e.target === rfqModal) hideModal();
});

// Respond button logic
document.querySelectorAll('.respond-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    const rfqId = this.getAttribute('data-rfq');
    const rfq = rfqData[rfqId];
    let lineItemsHtml = '';
    rfq.lineItems.forEach((li, idx) => {
      lineItemsHtml += `<div class="mb-4"><div class="font-semibold text-gray-800 mb-1">Line Item ${idx+1}: ${li.item}</div>`;
      li.subItems.forEach((sub, sidx) => {
        lineItemsHtml += `<div class="ml-4 mb-2 text-sm text-gray-700">Sub Item ${sidx+1}: ${sub.name} (Qty: ${sub.qty}) <input type='number' class='ml-2 border border-gray-300 rounded px-2 py-1 w-24' placeholder='Net Price' name='netprice-${idx}-${sidx}' /></div>`;
      });
      lineItemsHtml += '</div>';
    });
    showModal(`
      <h2 class='text-xl font-semibold text-[#212121] mb-4'>Respond to RFQ</h2>
      <form id='rfq-response-form' class='space-y-4'>
        <div class='grid grid-cols-2 gap-4'>
          <div><label class='block text-sm font-medium text-gray-700 mb-1'>RFQ No.</label><input type='text' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.rfqNo}' readonly /></div>
          <div><label class='block text-sm font-medium text-gray-700 mb-1'>Product</label><input type='text' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.product}' readonly /></div>
        </div>
        <div class='grid grid-cols-2 gap-4'>
          <div><label class='block text-sm font-medium text-gray-700 mb-1'>Quantity</label><input type='number' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.quantity}' readonly /></div>
          <div><label class='block text-sm font-medium text-gray-700 mb-1'>Buyer</label><input type='text' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.buyer}' readonly /></div>
        </div>
        <div><label class='block text-sm font-medium text-gray-700 mb-1'>Due Date</label><input type='text' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.dueDate}' readonly /></div>
        <div><label class='block text-sm font-medium text-gray-700 mb-1'>Line Items & Sub Items</label>${lineItemsHtml}</div>
        <div><label class='block text-sm font-medium text-gray-700 mb-1'>Total Price for All Items</label><input type='number' id='totalprice' class='w-full border border-gray-300 rounded-lg px-3 py-2' placeholder='Total Price' name='totalprice' readonly /></div>
        <div><label class='block text-sm font-medium text-gray-700 mb-1'>Comments</label><textarea class='w-full border border-gray-300 rounded-lg px-3 py-2' rows='2' placeholder='Add comments'></textarea></div>
        <div class='flex gap-4 mt-2'>
          <button type='submit' class='px-6 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition'><i class='fas fa-paper-plane mr-2'></i>Send Quotation</button>
          <button type='button' class='px-6 py-2 bg-gray-200 text-gray-800 rounded-lg font-medium hover:bg-gray-300 transition' onclick='hideModal()'><i class='fas fa-times mr-2'></i>Cancel</button>
        </div>
      </form>
    `);
    // Auto-calculate total price as sum of (qty x net price) for all sub-items
    const netPriceInputs = modalContent.querySelectorAll("input[name^='netprice-']");
    const totalPriceInput = modalContent.querySelector('#totalprice');
    // Get all sub-item quantities from the modal
    const subItemQtys = [];
    rfq.lineItems.forEach((li, idx) => {
      li.subItems.forEach((sub, sidx) => {
        subItemQtys.push(sub.qty);
      });
    });
    function updateTotalPrice() {
      let total = 0;
      netPriceInputs.forEach((input, i) => {
        const val = parseFloat(input.value);
        const qty = subItemQtys[i];
        if (!isNaN(val) && !isNaN(qty)) total += val * qty;
      });
      totalPriceInput.value = total ? total : '';
    }
    netPriceInputs.forEach(input => {
      input.addEventListener('input', updateTotalPrice);
    });
    document.getElementById('rfq-response-form').addEventListener('submit', function(e) {
      e.preventDefault();
      showModal(`<div class='text-center py-8'><i class='fas fa-check-circle text-green-600 text-4xl mb-4'></i><h3 class='text-xl font-semibold mb-2'>Quotation Sent!</h3><p class='text-gray-700'>Your quotation has been sent to the buyer successfully.</p><button class='mt-6 px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition' onclick='hideModal()'>Close</button></div>`);
    });
  });
});

// View button logic
document.querySelectorAll('.view-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    const rfqId = this.getAttribute('data-rfq');
    const rfq = rfqData[rfqId];
    let lineItemsHtml = '';
    rfq.lineItems.forEach((li, idx) => {
      lineItemsHtml += `<div class="mb-4"><div class="font-semibold text-gray-800 mb-1">Line Item ${idx+1}: ${li.item}</div>`;
      li.subItems.forEach((sub, sidx) => {
        lineItemsHtml += `<div class="ml-4 mb-2 text-sm text-gray-700">Sub Item ${sidx+1}: ${sub.name} (Qty: ${sub.qty})</div>`;
      });
      lineItemsHtml += '</div>';
    });
    showModal(`
      <h2 class='text-xl font-semibold text-[#212121] mb-4'>RFQ Details</h2>
      <div class='grid grid-cols-2 gap-4 mb-4'>
        <div><label class='block text-sm font-medium text-gray-700 mb-1'>RFQ No.</label><input type='text' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.rfqNo}' readonly /></div>
        <div><label class='block text-sm font-medium text-gray-700 mb-1'>Product</label><input type='text' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.product}' readonly /></div>
      </div>
      <div class='grid grid-cols-2 gap-4 mb-4'>
        <div><label class='block text-sm font-medium text-gray-700 mb-1'>Quantity</label><input type='number' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.quantity}' readonly /></div>
        <div><label class='block text-sm font-medium text-gray-700 mb-1'>Buyer</label><input type='text' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.buyer}' readonly /></div>
      </div>
      <div><label class='block text-sm font-medium text-gray-700 mb-1'>Due Date</label><input type='text' class='w-full border border-gray-300 rounded-lg px-3 py-2' value='${rfq.dueDate}' readonly /></div>
      <div class='mt-4'><label class='block text-sm font-medium text-gray-700 mb-1'>Line Items & Sub Items</label>${lineItemsHtml}</div>
      <div class='flex gap-4 mt-8'>
        <button type='button' class='px-6 py-2 bg-gray-200 text-gray-800 rounded-lg font-medium hover:bg-gray-300 transition' onclick='hideModal()'><i class='fas fa-times mr-2'></i>Close</button>
      </div>
    `);
  });
});
</script>
</body>
</html>
